<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nova Bank Pro</title>

<style>
body {margin:0; font-family:Arial,sans-serif; background:#e6f2ff;}
.header {background:#3399ff;color:white;padding:20px;display:flex;justify-content:space-between;align-items:center;}
.header h1 {font-size:22px;margin:0;}
.profile {width:40px;height:40px;background:white;color:#3399ff;border-radius:50%;text-align:center;line-height:40px;font-weight:bold;}
.container {padding:15px;}
.card {background:white;padding:15px 20px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.1);margin-bottom:15px;}
.balance {font-size:28px;font-weight:bold;color:#0077cc;margin:0;}
input {width:100%;padding:10px;margin-top:10px;border-radius:6px;border:1px solid #ccc;}
button {width:100%;padding:12px;margin-top:10px;border-radius:6px;border:none;background:#3399ff;color:white;font-weight:bold;cursor:pointer;}
button:hover {background:#1a8cff;}
button.logout {background:#ff4d4d;}
.transaction {padding:6px 0;border-bottom:1px solid #eee;font-size:14px;}
#chart {width:100%;height:150px;margin-top:10px;}
</style>
</head>

<body>

<!-- LOGIN PAGE -->
<div id="loginPage">
  <div class="header"><h1>Nova Bank</h1></div>
  <div class="container">
    <div class="card">
      <h3>Login</h3>
      <input type="email" id="email" placeholder="Enter your Gmail">
      <input type="password" id="password" placeholder="Enter your password">
      <button onclick="login()">Login</button>
    </div>
  </div>
</div>

<!-- DASHBOARD -->
<div id="dashboard" style="display:none;">
  <div class="header">
    <h1>Nova Bank</h1>
    <div class="profile" id="profileInitials">S</div>
  </div>

  <div class="container">

    <!-- Balance Card -->
    <div class="card">
      <div>Welcome, <span id="userName">Scott Messmer</span></div>
      <div>Balance</div>
      <div class="balance">$<span id="balance"></span></div>
    </div>

    <!-- Send Money -->
    <div class="card">
      <h4>Send Money</h4>
      <input type="number" id="sendAmount" placeholder="Enter amount">
      <button onclick="sendMoney()">Send</button>
    </div>

    <!-- Withdraw -->
    <div class="card">
      <h4>Withdraw</h4>
      <input type="number" id="withdrawAmount" placeholder="Enter amount">
      <button onclick="withdrawMoney()">Withdraw</button>
    </div>

    <!-- Deposit -->
    <div class="card">
      <h4>Deposit</h4>
      <input type="number" id="depositAmount" placeholder="Enter amount">
      <button onclick="depositMoney()">Deposit</button>
    </div>

    <!-- Transactions -->
    <div class="card">
      <h4>Transactions</h4>
      <div id="transactions"></div>
    </div>

    <!-- Chart -->
    <div class="card">
      <h4>Spending Chart</h4>
      <canvas id="chart"></canvas>
    </div>

    <!-- Logout -->
    <button class="logout" onclick="logout()">Logout</button>
  </div>
</div>

<script>
// INITIAL DATA
let balance = 50000;
let transactions = [];

// LOGIN FUNCTION
function login() {
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();

  if(email === "" || password === "") {
    alert("Please enter both Gmail and password");
    return;
  }

  localStorage.setItem("novaUser", email);
  localStorage.setItem("novaPass", password);
  showDashboard();
}

// SHOW DASHBOARD
function showDashboard() {
  const email = localStorage.getItem("novaUser");
  if(!email) return;

  document.getElementById("loginPage").style.display = "none";
  document.getElementById("dashboard").style.display = "block";

  // Hardcoded name and initials
  document.getElementById("profileInitials").innerText = "S"; // initial
  document.getElementById("userName").innerText = "Scott Messmer";

  updateUI();
}

// UPDATE UI
function updateUI() {
  document.getElementById("balance").innerText = balance.toLocaleString();

  const list = document.getElementById("transactions");
  list.innerHTML = "";
  transactions.slice().reverse().forEach(t => {
    const div = document.createElement("div");
    div.className = "transaction";
    div.innerText = `${t.type} - $${t.amount.toLocaleString()}`;
    list.appendChild(div);
  });

  updateChart();
}

// SEND MONEY
function sendMoney() {
  const amount = parseFloat(document.getElementById("sendAmount").value);
  if(amount > 0 && amount <= balance) {
    balance -= amount;
    transactions.push({type:"Sent", amount});
    updateUI();
  } else { alert("Invalid amount"); }
}

// WITHDRAW
function withdrawMoney() {
  const amount = parseFloat(document.getElementById("withdrawAmount").value);
  if(amount > 0 && amount <= balance) {
    balance -= amount;
    transactions.push({type:"Withdrawal", amount});
    updateUI();
  } else { alert("Invalid amount"); }
}

// DEPOSIT
function depositMoney() {
  const amount = parseFloat(document.getElementById("depositAmount").value);
  if(amount > 0) {
    balance += amount;
    transactions.push({type:"Deposit", amount});
    updateUI();
  } else { alert("Invalid amount"); }
}

// LOGOUT
function logout() {
  localStorage.removeItem("novaUser");
  localStorage.removeItem("novaPass");
  location.reload();
}

// CHART
function updateChart() {
  const canvas = document.getElementById("chart");
  const ctx = canvas.getContext("2d");

  ctx.clearRect(0,0,canvas.width,canvas.height);

  const deposits = transactions.filter(t=>t.type==="Deposit").reduce((a,b)=>a+b.amount,0);
  const withdrawals = transactions.filter(t=>t.type!=="Deposit").reduce((a,b)=>a+b.amount,0);

  const total = deposits + withdrawals;
  const depWidth = total ? (deposits/total) * canvas.width : 0;
  const withWidth = total ? (withdrawals/total) * canvas.width : 0;

  // Deposit bar
  ctx.fillStyle = "#33cc33";
  ctx.fillRect(0, canvas.height/4, depWidth, canvas.height/2);

  // Withdraw bar
  ctx.fillStyle = "#ff4d4d";
  ctx.fillRect(depWidth, canvas.height/4, withWidth, canvas.height/2);
}

// AUTO LOGIN IF ALREADY LOGGED IN
if(localStorage.getItem("novaUser")) { showDashboard(); }
</script>

</body>
</html>